{% extends "base.html" %}
{% block title %}Historial de Movimientos{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="fw-bold mb-4">ðŸ“‹ Historial de movimientos</h2>

    {% if movimientos %}
    <div class="table-responsive">
        <table class="table table-hover align-middle shadow-sm">
            <thead class="table-light">
                <tr>
                    <th>ID</th>
                    <th>Placa</th>
                    <th>Contenedor</th>
                    <th>Hora salida</th>
                    <th>Hora llegada</th>
                    <th>RegistrÃ³ salida</th>
                    <th>RegistrÃ³ llegada</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                {% for m in movimientos %}
                <tr>
                    <td>{{ m.id }}</td>
                    <td>{{ m.placa.numero_placa }}</td>
                    <td>{{ m.numero_contenedor }}</td>
                    <td>{{ m.hora_salida.strftime('%d/%m/%Y %H:%M') }}</td>
                    <td>
                        {% if m.hora_llegada %}
                            {{ m.hora_llegada.strftime('%d/%m/%Y %H:%M') }}
                        {% else %}
                            <span class="text-muted">Pendiente</span>
                        {% endif %}
                    </td>
                    <td>{{ m.usuario_salida.nombre if m.usuario_salida else 'â€”' }}</td>
                    <td>{{ m.usuario_llegada.nombre if m.usuario_llegada else 'â€”' }}</td>
                    <td>
                        {% if m.estado == 'EN_TRANSITO' %}
                            <span class="badge bg-warning text-dark">En trÃ¡nsito</span>
                        {% elif m.estado == 'FINALIZADO' %}
                            <span class="badge bg-success">Finalizado</span>
                        {% else %}
                            <span class="badge bg-secondary">{{ m.estado }}</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info text-center mt-4">
        No hay movimientos registrados.
    </div>
    {% endif %}
</div>
{% endblock %}